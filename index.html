<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>টাকা আয় করুন - বিজ্ঞাপন দেখুন</title>
    <script src='//libtl.com/sdk.js' data-zone='10271832' data-sdk='show_10271832'></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --success-color: #27ae60;
            --danger-color: #e74c3c;
            --warning-color: #f39c12;
            --dark-color: #2c3e50;
            --light-color: #ecf0f1;
            --card-bg: #ffffff;
            --text-color: #333333;
            --text-muted: #7f8c8d;
            --border-color: #dfe6e9;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
            color: var(--text-color);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            padding: 15px;
            padding-bottom: 70px;
        }
        
        .container {
            max-width: 500px;
            width: 100%;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            padding-bottom: 20px;
        }
        
        .header {
            background: linear-gradient(135deg, var(--primary-color), #2980b9);
            color: white;
            padding: 25px 20px;
            text-align: center;
            position: relative;
        }
        
        .header h1 {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 8px;
            letter-spacing: -0.5px;
        }
        
        .header p {
            opacity: 0.9;
            font-weight: 400;
        }
        
        .badge {
            display: inline-block;
            background-color: rgba(255, 255, 255, 0.2);
            padding: 6px 16px;
            border-radius: 50px;
            font-size: 12px;
            font-weight: 600;
            margin-top: 15px;
            backdrop-filter: blur(10px);
        }
        
        .user-card, .stat-card, .progress-container, .referral-section, .rate-info, .withdraw-section, .ad-status, .daily-limit {
            background-color: var(--card-bg);
            margin: 15px;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--border-color);
        }
        
        .user-card {
            display: flex;
            align-items: center;
        }
        
        .user-avatar {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 24px;
            color: white;
            margin-right: 20px;
            box-shadow: 0 4px 10px rgba(52, 152, 219, 0.3);
        }
        
        .stats-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }
        
        .stat-card {
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: none;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }
        
        .stat-card h3 {
            font-size: 13px;
            color: var(--text-muted);
            margin-bottom: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .stat-card p {
            font-size: 28px;
            font-weight: 800;
            color: var(--primary-color);
        }
        
        .progress-container {
            background: linear-gradient(135deg, #f8f9fa, #ffffff);
            border: 1px solid var(--border-color);
        }
        
        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }
        
        .progress-header h3 {
            color: var(--dark-color);
            font-weight: 600;
        }
        
        .progress-bar {
            height: 12px;
            background-color: #e9ecef;
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            border-radius: 6px;
            width: 0%;
            transition: width 0.5s ease;
            box-shadow: 0 2px 10px rgba(52, 152, 219, 0.3);
        }
        
        .progress-text {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: var(--text-muted);
            font-weight: 500;
        }
        
        .action-buttons {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin: 20px 15px;
        }
        
        .btn {
            padding: 16px;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            letter-spacing: 0.3px;
        }
        
        .btn-primary { 
            background: linear-gradient(135deg, var(--primary-color), #2980b9);
            color: white; 
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }
        
        .btn-success { 
            background: linear-gradient(135deg, var(--success-color), #27ae60);
            color: white; 
            box-shadow: 0 4px 15px rgba(46, 204, 113, 0.3);
        }
        
        .btn-danger { 
            background: linear-gradient(135deg, var(--danger-color), #c0392b);
            color: white; 
            box-shadow: 0 4px 15px rgba(231, 76, 60, 0.3);
        }
        
        .btn-warning { 
            background: linear-gradient(135deg, var(--warning-color), #e67e22);
            color: white; 
            box-shadow: 0 4px 15px rgba(243, 156, 18, 0.3);
        }
        
        .btn-secondary { 
            background: linear-gradient(135deg, #34495e, #2c3e50);
            color: white; 
            box-shadow: 0 4px 15px rgba(44, 62, 80, 0.2);
        }
        
        .btn:hover { 
            transform: translateY(-3px); 
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2); 
        }
        
        .btn:active { 
            transform: translateY(0); 
        }
        
        .btn:disabled { 
            opacity: 0.5; 
            cursor: not-allowed; 
            transform: none; 
            box-shadow: none; 
        }
        
        .btn i { 
            margin-right: 10px; 
            font-size: 20px; 
        }
        
        .section-title {
            font-size: 20px;
            margin-bottom: 20px;
            color: var(--dark-color);
            display: flex;
            align-items: center;
            font-weight: 700;
        }
        
        .section-title i {
            margin-right: 12px;
            color: var(--primary-color);
        }
        
        .referral-stats {
            display: flex;
            justify-content: space-between;
            background-color: #f8f9fa;
            padding: 15px 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
        }
        
        .referral-link-container {
            display: flex;
            margin-top: 20px;
        }
        
        #referral-link {
            flex: 1;
            padding: 14px 20px;
            background-color: #f8f9fa;
            border: 1px solid var(--border-color);
            border-radius: 12px 0 0 12px;
            color: var(--text-color);
            font-size: 15px;
            outline: none;
            font-family: monospace;
        }
        
        #copy-referral {
            padding: 0 20px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border: none;
            border-radius: 0 12px 12px 0;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        #copy-referral:hover {
            opacity: 0.9;
        }
        
        .withdraw-section { 
            display: none; 
        }
        
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 10px;
            font-size: 15px;
            color: var(--dark-color);
            font-weight: 600;
        }
        
        .form-control {
            width: 100%;
            padding: 14px 20px;
            background-color: #f8f9fa;
            border: 1px solid var(--border-color);
            border-radius: 12px;
            color: var(--text-color);
            font-size: 15px;
            outline: none;
            transition: all 0.3s ease;
            font-family: inherit;
        }
        
        .form-control:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
            background-color: white;
        }
        
        #withdraw-status {
            margin-top: 20px;
            font-size: 15px;
            text-align: center;
            padding: 15px;
            border-radius: 12px;
        }
        
        .success-message { 
            background-color: rgba(39, 174, 96, 0.1); 
            color: var(--success-color); 
            border: 1px solid rgba(39, 174, 96, 0.2);
        }
        
        .error-message { 
            background-color: rgba(231, 76, 60, 0.1); 
            color: var(--danger-color); 
            border: 1px solid rgba(231, 76, 60, 0.2);
        }
        
        .info-message { 
            background-color: rgba(52, 152, 219, 0.1); 
            color: var(--primary-color); 
            border: 1px solid rgba(52, 152, 219, 0.2);
        }
        
        .footer {
            text-align: center;
            margin-top: 30px;
            font-size: 13px;
            color: var(--text-muted);
            padding: 0 20px;
        }
        
        .notification {
            position: fixed;
            top: 25px;
            right: 25px;
            padding: 18px 24px;
            border-radius: 12px;
            background: white;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
            z-index: 1000;
            display: flex;
            align-items: center;
            transform: translateX(150%);
            transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            border-left: 4px solid;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification i {
            margin-right: 12px;
            font-size: 24px;
        }
        
        .notification.success {
            border-left-color: var(--success-color);
        }
        
        .notification.error {
            border-left-color: var(--danger-color);
        }
        
        .notification.info {
            border-left-color: var(--primary-color);
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .pulse { 
            animation: pulse 1.5s infinite; 
        }
        
        @keyframes coinAnimation {
            0% { transform: translateY(0) rotate(0); opacity: 1; }
            100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
        }
        
        .coin-animation {
            position: absolute;
            font-size: 28px;
            color: #f1c40f;
            z-index: 100;
            animation: coinAnimation 1s forwards;
        }
        
        /* নেভিগেশন বার স্টাইল */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            display: flex;
            justify-content: space-around;
            padding: 12px 0;
            box-shadow: 0 -2px 20px rgba(0, 0, 0, 0.08);
            z-index: 1000;
            border-top: 1px solid var(--border-color);
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            color: var(--text-muted);
            text-decoration: none;
            font-size: 13px;
            transition: all 0.3s ease;
            padding: 8px 12px;
            border-radius: 12px;
            width: 20%;
        }
        
        .nav-item.active {
            color: var(--primary-color);
            background: rgba(52, 152, 219, 0.1);
        }
        
        .nav-item i {
            font-size: 22px;
            margin-bottom: 6px;
        }
        
        .nav-item:hover {
            color: var(--primary-color);
        }
        
        /* পেজ সেকশন স্টাইল */
        .page-section {
            display: none;
        }
        
        .page-section.active {
            display: block;
        }
        
        /* বিজ্ঞাপন কন্টেইনার স্টাইল */
        .ad-container {
            margin: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 90px;
            background-color: #f8f9fa;
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid var(--border-color);
        }
        
        /* পপআপ মডেল স্টাইল */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.85);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }
        
        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 400px;
            width: 90%;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }
        
        .modal-content h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: 24px;
            font-weight: 700;
        }
        
        .modal-content p {
            margin-bottom: 25px;
            line-height: 1.5;
            color: var(--text-color);
        }
        
        .modal-btn {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }
        
        .modal-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }
        
        .referral-notice {
            background-color: rgba(243, 156, 18, 0.1);
            border: 1px solid rgba(243, 156, 18, 0.3);
            border-radius: 12px;
            padding: 15px 20px;
            margin-bottom: 20px;
            font-size: 14px;
            color: #d35400;
            text-align: center;
            font-weight: 500;
        }
        
        .daily-limit {
            background-color: rgba(231, 76, 60, 0.1);
            border: 1px solid rgba(231, 76, 60, 0.3);
            text-align: center;
        }
        
        .daily-limit h3 {
            color: var(--danger-color);
            margin-bottom: 15px;
            font-weight: 700;
        }
        
        .timer {
            font-size: 28px;
            font-weight: 800;
            color: var(--danger-color);
            margin: 15px 0;
            font-family: 'Courier New', monospace;
        }
        
        /* মুভি সেকশন স্টাইল */
        .movies-section {
            padding: 20px 15px;
        }
        
        .movie-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 25px;
            margin-top: 25px;
        }
        
        .movie-card {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid var(--border-color);
        }
        
        .movie-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.12);
        }
        
        .movie-thumbnail {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }
        
        .movie-info {
            padding: 20px;
        }
        
        .movie-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 12px;
            color: var(--dark-color);
        }
        
        .movie-description {
            font-size: 15px;
            color: var(--text-muted);
            margin-bottom: 20px;
            line-height: 1.5;
        }
        
        .movie-progress {
            margin-bottom: 20px;
        }
        
        .progress-info {
            display: flex;
            justify-content: space-between;
            font-size: 13px;
            color: var(--text-muted);
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .progress-bar-small {
            height: 8px;
            background-color: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill-small {
            height: 100%;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .play-movie-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
            font-size: 16px;
        }
        
        .play-movie-btn:hover {
            opacity: 0.95;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        
        .play-movie-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .play-movie-btn i {
            margin-right: 10px;
            font-size: 18px;
        }
        
        .movie-ads-required {
            font-size: 13px;
            color: var(--warning-color);
            text-align: center;
            margin-top: 12px;
            font-weight: 500;
        }
        
        .movie-timer {
            background-color: rgba(52, 152, 219, 0.1);
            border: 1px solid rgba(52, 152, 219, 0.2);
            border-radius: 12px;
            padding: 12px;
            margin-top: 15px;
            text-align: center;
        }
        
        .movie-timer-text {
            font-size: 13px;
            color: var(--primary-color);
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .movie-timer-countdown {
            font-size: 20px;
            font-weight: 800;
            color: var(--primary-color);
            font-family: 'Courier New', monospace;
        }
        
        .movie-status {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-size: 14px;
        }
        
        .movie-status-item {
            background: #f8f9fa;
            padding: 8px 12px;
            border-radius: 8px;
            font-weight: 500;
        }
        
        .movie-status-item span {
            color: var(--primary-color);
            font-weight: 700;
        }
        
        @media (max-width: 400px) {
            .header h1 { font-size: 22px; }
            .stats-container { grid-template-columns: 1fr; }
            .btn { padding: 14px; font-size: 15px; }
            .nav-item { font-size: 12px; padding: 6px; }
            .nav-item i { font-size: 20px; }
            .modal-content { padding: 25px; }
            .movie-thumbnail {
                height: 180px;
            }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <!-- পপআপ মডেল -->
    <div id="telegramModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2><i class="fas fa-exclamation-triangle"></i> গুরুত্বপূর্ণ নোটিশ</h2>
            <p>আমাদের টেলিগ্রাম চ্যানেলে জয়েন না থাকলে পেমেন্ট পাবেন না।</p>
            <p style="margin-top: 15px;">জয়েন করার পর নিচের বাটনে ক্লিক করুন:</p>
            <button class="modal-btn" onclick="verifyTelegramJoin()">
                <i class="fas fa-check-circle"></i> চেক করুন
            </button>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <h1>টাকা আয় করুন - বিজ্ঞাপন দেখুন</h1>
            <p>বিজ্ঞাপন দেখে আসল টাকা আয় করুন</p>
            <div class="badge">সক্রিয়</div>
        </div>
        
        <!-- হেডার এর নিচে প্রথম বিজ্ঞাপন -->
        <div class="ad-container">
            <center>
                <script type="text/javascript">
                    atOptions = {
                        'key' : '65ca3537481cdbb4d1fbea426b067ed5',
                        'format' : 'iframe',
                        'height' : 50,
                        'width' : 320,
                        'params' : {}
                    };
                </script>
                <script type="text/javascript" src="//intimidatingsideway.com/65ca3537481cdbb4d1fbea426b067ed5/invoke.js"></script>
            </center>
        </div>
        
        <!-- হোম পেজ -->
        <div class="page-section active" id="home-page">
            <div class="user-card">
                <div class="user-avatar" id="user-avatar">U</div>
                <div class="user-info">
                    <h3 id="user-name">ব্যবহারকারী</h3>
                    <p>আইডি: <span id="user-id">12345</span></p>
                </div>
            </div>
            
            <div class="stats-container">
                <div class="stat-card">
                    <h3>দেখা বিজ্ঞাপন</h3>
                    <p id="watched-ads">0</p>
                </div>
                <div class="stat-card">
                    <h3>আয়কৃত টাকা</h3>
                    <p id="earned-money">0.00 <small>টাকা</small></p>
                </div>
            </div>
            
            <div class="progress-container">
                <div class="progress-header">
                    <h3>আজকের অগ্রগতি</h3>
                    <span id="ads-progress">0/500</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <div class="progress-text">
                    <span>0 টাকা</span>
                    <span>500 টাকা</span>
                </div>
            </div>
            
            <div class="ad-status" id="ad-status">
                <i class="fas fa-check-circle"></i> বিজ্ঞাপন দেখতে প্রস্তুত
            </div>
            
            <!-- দৈনিক সীমা বিভাগ -->
            <div class="daily-limit" id="daily-limit" style="display: none;">
                <h3><i class="fas fa-exclamation-triangle"></i> দৈনিক সীমা পূর্ণ!</h3>
                <p>আপনি আজ ৫০০টি বিজ্ঞাপন দেখেছেন। আবার দেখতে নিচের টাইমার শেষ হওয়ার জন্য অপেক্ষা করুন:</p>
                <div class="timer" id="timer">24:00:00</div>
                <p>পরবর্তী বিজ্ঞাপন দেখতে বাকি সময়</p>
            </div>
            
            <div class="action-buttons">
                <button class="btn btn-primary" id="watch-ad-btn" onclick="watchAd()">
                    <i class="fas fa-play"></i> বিজ্ঞাপন দেখুন (২ টাকা)
                </button>
                <button class="btn btn-success" id="auto-ad-btn" onclick="startAutoAds()">
                    <i class="fas fa-robot"></i> স্বয়ংক্রিয় বিজ্ঞাপন
                </button>
                <button class="btn btn-danger" id="stop-auto-btn" onclick="stopAutoAds()" disabled>
                    <i class="fas fa-stop"></i> বন্ধ করুন
                </button>
                <button class="btn btn-warning" onclick="showPage('movies-page', document.querySelector('.nav-item:nth-child(3)'))">
                    <i class="fas fa-film"></i> মুভি দেখুন (৩টি বিজ্ঞাপন)
                </button>
                <button class="btn btn-secondary" onclick="showWithdrawForm()">
                    <i class="fas fa-wallet"></i> টাকা উত্তোলন
                </button>
            </div>
            
            <!-- পৃষ্ঠার মাঝখানে দ্বিতীয় বিজ্ঞাপন -->
            <div class="ad-container">
                <center>
                    <script type="text/javascript">
                        atOptions = {
                            'key' : '65ca3537481cdbb4d1fbea426b067ed5',
                            'format' : 'iframe',
                            'height' : 50,
                            'width' : 320,
                            'params' : {}
                        };
                    </script>
                    <script type="text/javascript" src="//intimidatingsideway.com/65ca3537481cdbb4d1fbea426b067ed5/invoke.js"></script>
                </center>
            </div>
            
            <div class="referral-section">
                <h3 class="section-title"><i class="fas fa-users"></i> বন্ধুকে আমন্ত্রণ করুন</h3>
                
                <div class="referral-notice">
                    <i class="fas fa-exclamation-circle"></i> কমপক্ষে ১০ টি রেফার না থাকলে পেমেন্ট পাবেন না তাই বেশি বেশি রেফার করুন
                </div>
                
                <div class="referral-stats">
                    <div>আমন্ত্রিত: <strong id="referral-count">0</strong></div>
                    <div>আয়: <strong id="referral-earnings">0.00</strong> টাকা</div>
                </div>
                <p style="font-size: 15px; margin-bottom: 15px; color: var(--text-muted);">আপনার রেফারেল লিঙ্ক শেয়ার করুন এবং প্রতিটি বন্ধুর জন্য ১০ টাকা বোনাস পান!</p>
                <div class="referral-link-container">
                    <input type="text" id="referral-link" readonly>
                    <button id="copy-referral" onclick="copyReferralLink()">কপি</button>
                </div>
            </div>
            
            <div class="rate-info">
                <p><i class="fas fa-ad"></i> প্রতি বিজ্ঞাপন = ২ টাকা</p>
                <p><i class="fas fa-money-bill-wave"></i> ন্যূনতম উত্তোলন: ৫০০ টাকা</p>
                <p><i class="fas fa-gift"></i> রেফারেল বোনাস: ১০ টাকা প্রতি ব্যবহারকারী</p>
                <p><i class="fas fa-clock"></i> দৈনিক সীমা: ৫০০ বিজ্ঞাপন</p>
            </div>
        </div>
        
        <!-- আর্ন পেজ -->
        <div class="page-section" id="earn-page">
            <h3 class="section-title"><i class="fas fa-coins"></i> টাকা আয় করার উপায়</h3>
            
            <div class="action-buttons">
                <button class="btn btn-primary" id="watch-ad-btn-earn" onclick="watchAd()">
                    <i class="fas fa-play"></i> বিজ্ঞাপন দেখুন (২ টাকা)
                </button>
                <button class="btn btn-success" id="auto-ad-btn-earn" onclick="startAutoAds()">
                    <i class="fas fa-robot"></i> স্বয়ংক্রিয় বিজ্ঞাপন
                </button>
                <button class="btn btn-danger" id="stop-auto-btn-earn" onclick="stopAutoAds()" disabled>
                    <i class="fas fa-stop"></i> বন্ধ করুন
                </button>
            </div>
            
            <div class="referral-section">
                <h3 class="section-title"><i class="fas fa-users"></i> বন্ধুকে আমন্ত্রণ করুন</h3>
                
                <div class="referral-notice">
                    <i class="fas fa-exclamation-circle"></i> কমপক্ষে ১০ টি রেফার না থাকলে পেমেন্ট পাবেন না তাই বেশি বেশি রেফার করুন
                </div>
                
                <div class="referral-stats">
                    <div>আমন্ত্রিত: <strong id="referral-count-earn">0</strong></div>
                    <div>আয়: <strong id="referral-earnings-earn">0.00</strong> টাকা</div>
                </div>
                <p style="font-size: 15px; margin-bottom: 15px; color: var(--text-muted);">আপনার রেফারেল লিঙ্ক শেয়ার করুন এবং প্রতিটি বন্ধুর জন্য ১০ টাকা বোনাস পান!</p>
                <div class="referral-link-container">
                    <input type="text" id="referral-link-earn" readonly>
                    <button id="copy-referral-earn" onclick="copyReferralLink()">কপি</button>
                </div>
            </div>
            
            <div class="rate-info">
                <p><i class="fas fa-ad"></i> প্রতি বিজ্ঞাপন = ২ টাকা</p>
                <p><i class="fas fa-gift"></i> রেফারেল বোনাস: ১০ টাকা প্রতি ব্যবহারকারী</p>
                <p><i class="fas fa-clock"></i> দৈনিক সীমা: ৫০০ বিজ্ঞাপন</p>
            </div>
        </div>
        
        <!-- মুভি পেজ -->
        <div class="page-section" id="movies-page">
            <h3 class="section-title"><i class="fas fa-film"></i> মুভি দেখুন</h3>
            <p style="margin: 0 15px 20px; color: var(--text-muted); font-size: 15px;">প্রতিটি মুভি দেখতে ৩টি বিজ্ঞাপন দেখুন। মুভি দেখা শেষে ৫ মিনিট পর আবার ৩টি বিজ্ঞাপন দেখতে হবে।</p>
            
            <div class="movies-section">
                <div class="movie-grid">
                    <!-- মুভি ১ -->
                    <div class="movie-card" id="movie-1">
                        <img src="https://i.postimg.cc/Hkd85Ckj/1764228555863.jpg" alt="মুভি ১" class="movie-thumbnail">
                        <div class="movie-info">
                            <h4 class="movie-title">অ্যাকশন মুভি ২০২৪</h4>
                            <p class="movie-description">রোমাঞ্চকর অ্যাকশন মুভি। সম্পূর্ণ ফ্রি দেখতে নিচের বাটনে ক্লিক করুন এবং বিজ্ঞাপন দেখুন।</p>
                            
                            <div class="movie-status">
                                <div class="movie-status-item">আসন্ন বিজ্ঞাপন: <span id="movie-1-ads">0</span>/3</div>
                                <div class="movie-status-item">অবস্থা: <span id="movie-1-status">প্রস্তুত</span></div>
                            </div>
                            
                            <div class="movie-progress">
                                <div class="progress-info">
                                    <span>অগ্রগতি</span>
                                    <span id="movie-1-progress">0/3 বিজ্ঞাপন</span>
                                </div>
                                <div class="progress-bar-small">
                                    <div class="progress-fill-small" id="movie-1-bar" style="width: 0%"></div>
                                </div>
                            </div>
                            
                            <!-- টাইমার -->
                            <div class="movie-timer" id="movie-1-timer" style="display: none;">
                                <div class="movie-timer-text">আবার দেখতে অপেক্ষা করুন:</div>
                                <div class="movie-timer-countdown" id="movie-1-countdown">05:00</div>
                            </div>
                            
                            <button class="play-movie-btn" id="movie-1-btn" onclick="watchMovieAd(1)">
                                <i class="fas fa-play"></i> Play NOW
                            </button>
                            <p class="movie-ads-required">৩টি বিজ্ঞাপন দেখার পর মুভিটি দেখতে পারবেন</p>
                        </div>
                    </div>
                    
                    <!-- মুভি ২ -->
                    <div class="movie-card" id="movie-2">
                        <img src="https://i.postimg.cc/yxtx4xkH/hq720-(1).jpg" alt="মুভি ২" class="movie-thumbnail">
                        <div class="movie-info">
                            <h4 class="movie-title">থ্রিলার মুভি ২০২৪</h4>
                            <p class="movie-description">মারাত্মক থ্রিলার মুভি। সম্পূর্ণ ফ্রি দেখতে নিচের বাটনে ক্লিক করুন এবং বিজ্ঞাপন দেখুন।</p>
                            
                            <div class="movie-status">
                                <div class="movie-status-item">আসন্ন বিজ্ঞাপন: <span id="movie-2-ads">0</span>/3</div>
                                <div class="movie-status-item">অবস্থা: <span id="movie-2-status">প্রস্তুত</span></div>
                            </div>
                            
                            <div class="movie-progress">
                                <div class="progress-info">
                                    <span>অগ্রগতি</span>
                                    <span id="movie-2-progress">0/3 বিজ্ঞাপন</span>
                                </div>
                                <div class="progress-bar-small">
                                    <div class="progress-fill-small" id="movie-2-bar" style="width: 0%"></div>
                                </div>
                            </div>
                            
                            <!-- টাইমার -->
                            <div class="movie-timer" id="movie-2-timer" style="display: none;">
                                <div class="movie-timer-text">আবার দেখতে অপেক্ষা করুন:</div>
                                <div class="movie-timer-countdown" id="movie-2-countdown">05:00</div>
                            </div>
                            
                            <button class="play-movie-btn" id="movie-2-btn" onclick="watchMovieAd(2)">
                                <i class="fas fa-play"></i> Play NOW
                            </button>
                            <p class="movie-ads-required">৩টি বিজ্ঞাপন দেখার পর মুভিটি দেখতে পারবেন</p>
                        </div>
                    </div>
                    
                    <!-- মুভি ৩ -->
                    <div class="movie-card" id="movie-3">
                        <img src="https://i.postimg.cc/0jTkX4B9/hq720-(2).jpg" alt="মুভি ৩" class="movie-thumbnail">
                        <div class="movie-info">
                            <h4 class="movie-title">রোমান্টিক মুভি ২০২৪</h4>
                            <p class="movie-description">সেরা রোমান্টিক মুভি। সম্পূর্ণ ফ্রি দেখতে নিচের বাটনে ক্লিক করুন এবং বিজ্ঞাপন দেখুন।</p>
                            
                            <div class="movie-status">
                                <div class="movie-status-item">আসন্ন বিজ্ঞাপন: <span id="movie-3-ads">0</span>/3</div>
                                <div class="movie-status-item">অবস্থা: <span id="movie-3-status">প্রস্তুত</span></div>
                            </div>
                            
                            <div class="movie-progress">
                                <div class="progress-info">
                                    <span>অগ্রগতি</span>
                                    <span id="movie-3-progress">0/3 বিজ্ঞাপন</span>
                                </div>
                                <div class="progress-bar-small">
                                    <div class="progress-fill-small" id="movie-3-bar" style="width: 0%"></div>
                                </div>
                            </div>
                            
                            <!-- টাইমার -->
                            <div class="movie-timer" id="movie-3-timer" style="display: none;">
                                <div class="movie-timer-text">আবার দেখতে অপেক্ষা করুন:</div>
                                <div class="movie-timer-countdown" id="movie-3-countdown">05:00</div>
                            </div>
                            
                            <button class="play-movie-btn" id="movie-3-btn" onclick="watchMovieAd(3)">
                                <i class="fas fa-play"></i> Play NOW
                            </button>
                            <p class="movie-ads-required">৩টি বিজ্ঞাপন দেখার পর মুভিটি দেখতে পারবেন</p>
                        </div>
                    </div>
                    
                    <!-- মুভি ৪ -->
                    <div class="movie-card" id="movie-4">
                        <img src="https://i.postimg.cc/NGmj5s9c/hq720.jpg" alt="মুভি ৪" class="movie-thumbnail">
                        <div class="movie-info">
                            <h4 class="movie-title">কমেডি মুভি ২০২৪</h4>
                            <p class="movie-description">হাসির খোরাক কমেডি মুভি। সম্পূর্ণ ফ্রি দেখতে নিচের বাটনে ক্লিক করুন এবং বিজ্ঞাপন দেখুন।</p>
                            
                            <div class="movie-status">
                                <div class="movie-status-item">আসন্ন বিজ্ঞাপন: <span id="movie-4-ads">0</span>/3</div>
                                <div class="movie-status-item">অবস্থা: <span id="movie-4-status">প্রস্তুত</span></div>
                            </div>
                            
                            <div class="movie-progress">
                                <div class="progress-info">
                                    <span>অগ্রগতি</span>
                                    <span id="movie-4-progress">0/3 বিজ্ঞাপন</span>
                                </div>
                                <div class="progress-bar-small">
                                    <div class="progress-fill-small" id="movie-4-bar" style="width: 0%"></div>
                                </div>
                            </div>
                            
                            <!-- টাইমার -->
                            <div class="movie-timer" id="movie-4-timer" style="display: none;">
                                <div class="movie-timer-text">আবার দেখতে অপেক্ষা করুন:</div>
                                <div class="movie-timer-countdown" id="movie-4-countdown">05:00</div>
                            </div>
                            
                            <button class="play-movie-btn" id="movie-4-btn" onclick="watchMovieAd(4)">
                                <i class="fas fa-play"></i> Play NOW
                            </button>
                            <p class="movie-ads-required">৩টি বিজ্ঞাপন দেখার পর মুভিটি দেখতে পারবেন</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- উত্তোলন পেজ -->
        <div class="page-section" id="withdraw-page">
            <h3 class="section-title"><i class="fas fa-wallet"></i> টাকা উত্তোলন</h3>
            
            <div class="stat-card">
                <h3>মোট আয়</h3>
                <p id="total-earned-withdraw">0.00 <small>টাকা</small></p>
            </div>
            
            <div class="withdraw-section" id="withdraw-section">
                <div class="form-group">
                    <label for="withdraw-amount">পরিমাণ (টাকা)</label>
                    <input type="number" id="withdraw-amount" class="form-control" placeholder="টাকার পরিমাণ লিখুন" min="500">
                </div>
                <div class="form-group">
                    <label for="payment-method">পেমেন্ট মাধ্যম</label>
                    <select id="payment-method" class="form-control">
                        <option value="" disabled selected>পেমেন্ট মাধ্যম নির্বাচন করুন</option>
                        <option value="bkash">bKash</option>
                        <option value="nagad">Nagad</option>
                        <option value="rocket">Rocket</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="withdraw-phone">মোবাইল নম্বর</label>
                    <input type="text" id="withdraw-phone" class="form-control" placeholder="01XXXXXXXXX" pattern="01[3-9]{1}[0-9]{8}">
                </div>
                <button class="btn btn-primary" onclick="withdrawPoints()">
                    <i class="fas fa-paper-plane"></i> অনুরোধ পাঠান
                </button>
                <div id="withdraw-status"></div>
            </div>
            
            <div class="rate-info">
                <p><i class="fas fa-money-bill-wave"></i> ন্যূনতম উত্তোলন: ৫০০ টাকা</p>
                <p><i class="fas fa-clock"></i> উত্তোলন প্রসেসিং সময়: ২৪-৪৮ ঘন্টা</p>
            </div>
        </div>
        
        <!-- নোটিশ পেজ -->
        <div class="page-section" id="notice-page">
            <h3 class="section-title"><i class="fas fa-bell"></i> নোটিশ ও আপডেট</h3>
            
            <div class="notification-list">
                <div class="stat-card">
                    <h3><i class="fas fa-info-circle"></i> নতুন আপডেট</h3>
                    <p>স্বয়ংক্রিয় বিজ্ঞাপন সিস্টেম চালু হয়েছে। এখন থেকে স্বয়ংক্রিয়ভাবে বিজ্ঞাপন দেখে টাকা আয় করতে পারবেন।</p>
                    <small>২ দিন আগে</small>
                </div>
                
                <div class="stat-card">
                    <h3><i class="fas fa-film"></i> নতুন মুভি সেকশন</h3>
                    <p>নতুন মুভি সেকশন যোগ করা হয়েছে। প্রতিটি মুভি দেখতে ৩টি বিজ্ঞাপন দেখুন এবং ৫ মিনিট পর আবার দেখুন।</p>
                    <small>আজ</small>
                </div>
                
                <div class="stat-card">
                    <h3><i class="fas fa-gift"></i> বিশেষ অফার</h3>
                    <p>এই সপ্তাহে অতিরিক্ত ১০% বোনাস পেতে আপনার বন্ধুদের আমন্ত্রণ করুন।</p>
                    <small>৫ দিন আগে</small>
                </div>
                
                <div class="stat-card">
                    <h3><i class="fas fa-exclamation-triangle"></i> গুরুত্বপূর্ণ নোটিশ</h3>
                    <p>উত্তোলনের জন্য ন্যূনতম ৫০০ টাকা প্রয়োজন। দয়া করে উত্তোলন করার আগে নিশ্চিত হয়ে নিন।</p>
                    <small>১ সপ্তাহ আগে</small>
                </div>
                
                <div class="stat-card">
                    <h3><i class="fas fa-clock"></i> দৈনিক সীমা</h3>
                    <p>প্রতিদিন সর্বোচ্চ ৫০০টি বিজ্ঞাপন দেখতে পারবেন। ৫০০টি বিজ্ঞাপন দেখার পর ২৪ ঘন্টা অপেক্ষা করতে হবে।</p>
                    <small>নতুন আপডেট</small>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>© ২০২৩ টাকা আয় করুন অ্যাপ। সকল অধিকার সংরক্ষিত।</p>
        </div>
    </div>

    <!-- নেভিগেশন বার -->
    <div class="bottom-nav">
        <a href="#" class="nav-item active" onclick="showPage('home-page', this)">
            <i class="fas fa-home"></i>
            <span>হোম</span>
        </a>
        <a href="#" class="nav-item" onclick="showPage('earn-page', this)">
            <i class="fas fa-coins"></i>
            <span>আর্ন</span>
        </a>
        <a href="#" class="nav-item" onclick="showPage('movies-page', this)">
            <i class="fas fa-film"></i>
            <span>মুভি</span>
        </a>
        <a href="#" class="nav-item" onclick="showPage('withdraw-page', this)">
            <i class="fas fa-wallet"></i>
            <span>উত্তোলন</span>
        </a>
        <a href="#" class="nav-item" onclick="showPage('notice-page', this)">
            <i class="fas fa-bell"></i>
            <span>নোটিশ</span>
        </a>
    </div>

    <div id="notification" class="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notification-text"></span>
    </div>

    <script>
        // Constants
        const POINTS_PER_AD = 2.00; // প্রতি বিজ্ঞাপনে ২ টাকা
        const MIN_WITHDRAW_TAKA = 500; // ন্যূনতম উত্তোলন ৫০০ টাকা
        const REFERRAL_BONUS = 10.00; // রেফারেল বোনাস ১০ টাকা
        const MIN_REFERRAL_COUNT = 10; // ন্যূনতম রেফার সংখ্যা
        const DAILY_AD_LIMIT = 500; // দৈনিক বিজ্ঞাপন সীমা
        const MOVIE_ADS_REQUIRED = 3; // মুভি দেখতে প্রয়োজনীয় বিজ্ঞাপন সংখ্যা
        const MOVIE_COOLDOWN_MINUTES = 5; // মুভি দেখার পর কুলডাউন সময় (মিনিট)
        
        // মুভি লিংক
        const MOVIE_LINKS = [
            "https://www.youtube.com/watch?v=CZhtWUjhkRU",
            "https://www.youtube.com/watch?v=x_uKAYTHxmw",
            "https://www.youtube.com/watch?v=iJnbHa0yE7g",
            "https://www.youtube.com/watch?v=kiNntyDxA50"
        ];
        
        // Telegram Bot Configuration
        const BOT_TOKEN = "8276303429:AAGJtBuuR-bbtqdTOFG_9AbRQtCDrK0M540";
        const ADMIN_CHAT_ID = "8481059948";
        
        // Variables
        let watchedAdsCount = 0;
        let earnedPoints = 0.00;
        let referralCount = 0;
        let referralEarnings = 0.00;
        let userId = generateUserId();
        let autoAdInterval;
        let isAutoMode = false;
        let isAdLoading = false;
        let dailyAdsWatched = 0;
        let limitResetTime = null;
        let timerInterval = null;
        let movieTimers = {};
        
        // মুভি ডেটা
        let movieAdsWatched = [0, 0, 0, 0]; // 4টি মুভির জন্য বিজ্ঞাপন সংখ্যা
        let movieCooldowns = [null, null, null, null]; // 4টি মুভির জন্য কুলডাউন শেষ সময়
        let currentMovieAd = null; // বর্তমানে কোন মুভির বিজ্ঞাপন দেখানো হচ্ছে
        let movieTimerIntervals = [null, null, null, null]; // প্রতিটি মুভির জন্য টাইমার ইন্টারভাল

        // Initialize the app
        function initApp() {
            // Check for referral in URL
            checkReferral();
            
            // Set user info
            document.getElementById('user-id').textContent = userId;
            document.getElementById('user-avatar').textContent = userId.charAt(0).toUpperCase();
            
            // Load user data
            loadUserData();
            updateUI();
            checkAdReady();
            updateMovieProgress();
            startMovieCooldownTimers();
            
            // Generate referral link
            generateReferralLink();
            
            // Check if user has joined Telegram channel
            checkTelegramJoin();
            
            // Check daily ad limit
            checkDailyLimit();
        }

        // Start movie cooldown timers
        function startMovieCooldownTimers() {
            for (let i = 0; i < 4; i++) {
                checkMovieCooldown(i+1);
            }
        }

        // Check movie cooldown status
        function checkMovieCooldown(movieIndex) {
            const index = movieIndex - 1;
            const cooldownEnd = movieCooldowns[index];
            
            if (cooldownEnd) {
                const now = new Date().getTime();
                if (now < cooldownEnd) {
                    // Cooldown is active
                    startMovieTimer(movieIndex, cooldownEnd);
                    updateMovieButton(movieIndex, false, true);
                } else {
                    // Cooldown is over
                    movieCooldowns[index] = null;
                    localStorage.setItem(`movie${movieIndex}_cooldown`, null);
                    updateMovieButton(movieIndex, false, false);
                }
            }
        }

        // Start movie timer
        function startMovieTimer(movieIndex, cooldownEnd) {
            const index = movieIndex - 1;
            
            // Clear existing timer
            if (movieTimerIntervals[index]) {
                clearInterval(movieTimerIntervals[index]);
            }
            
            // Show timer
            document.getElementById(`movie-${movieIndex}-timer`).style.display = 'block';
            
            // Update countdown immediately
            updateMovieCountdown(movieIndex, cooldownEnd);
            
            // Start interval
            movieTimerIntervals[index] = setInterval(() => {
                updateMovieCountdown(movieIndex, cooldownEnd);
            }, 1000);
        }

        // Update movie countdown
        function updateMovieCountdown(movieIndex, cooldownEnd) {
            const now = new Date().getTime();
            const distance = cooldownEnd - now;
            
            if (distance <= 0) {
                // Cooldown is over
                const index = movieIndex - 1;
                clearInterval(movieTimerIntervals[index]);
                movieTimerIntervals[index] = null;
                movieCooldowns[index] = null;
                localStorage.setItem(`movie${movieIndex}_cooldown`, null);
                
                document.getElementById(`movie-${movieIndex}-timer`).style.display = 'none';
                document.getElementById(`movie-${movieIndex}-status`).textContent = 'প্রস্তুত';
                updateMovieButton(movieIndex, false, false);
                
                return;
            }
            
            // Calculate minutes and seconds
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);
            
            // Display the countdown
            document.getElementById(`movie-${movieIndex}-countdown`).textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            document.getElementById(`movie-${movieIndex}-status`).textContent = 'কুলডাউন';
        }

        // Check daily ad limit
        function checkDailyLimit() {
            const today = new Date().toDateString();
            const storedDate = localStorage.getItem('lastAdDate');
            const storedDailyAds = parseInt(localStorage.getItem('dailyAdsWatched')) || 0;
            
            // Reset daily count if it's a new day
            if (storedDate !== today) {
                dailyAdsWatched = 0;
                localStorage.setItem('dailyAdsWatched', dailyAdsWatched);
                localStorage.setItem('lastAdDate', today);
                document.getElementById('daily-limit').style.display = 'none';
                enableAdButtons();
            } else {
                dailyAdsWatched = storedDailyAds;
                
                // Check if daily limit is reached
                if (dailyAdsWatched >= DAILY_AD_LIMIT) {
                    disableAdButtons();
                    document.getElementById('daily-limit').style.display = 'block';
                    
                    // Set limit reset time if not already set
                    if (!limitResetTime) {
                        limitResetTime = new Date();
                        limitResetTime.setHours(limitResetTime.getHours() + 24);
                        localStorage.setItem('limitResetTime', limitResetTime.getTime());
                    } else {
                        limitResetTime = new Date(parseInt(localStorage.getItem('limitResetTime')));
                    }
                    
                    // Start timer
                    startTimer();
                } else {
                    document.getElementById('daily-limit').style.display = 'none';
                    enableAdButtons();
                }
            }
        }

        // Start countdown timer
        function startTimer() {
            if (timerInterval) clearInterval(timerInterval);
            
            timerInterval = setInterval(() => {
                const now = new Date().getTime();
                const distance = limitResetTime - now;
                
                if (distance <= 0) {
                    clearInterval(timerInterval);
                    dailyAdsWatched = 0;
                    localStorage.setItem('dailyAdsWatched', dailyAdsWatched);
                    localStorage.removeItem('limitResetTime');
                    document.getElementById('daily-limit').style.display = 'none';
                    enableAdButtons();
                    showNotification('দৈনিক সীমা রিসেট হয়েছে! আপনি আবার বিজ্ঞাপন দেখতে পারবেন।', 'success');
                    return;
                }
                
                // Calculate hours, minutes and seconds
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);
                
                // Display the timer
                document.getElementById('timer').textContent = 
                    `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }

        // Disable ad buttons when daily limit is reached
        function disableAdButtons() {
            document.getElementById('watch-ad-btn').disabled = true;
            document.getElementById('watch-ad-btn-earn').disabled = true;
            document.getElementById('auto-ad-btn').disabled = true;
            document.getElementById('auto-ad-btn-earn').disabled = true;
            document.getElementById('stop-auto-btn').disabled = true;
            document.getElementById('stop-auto-btn-earn').disabled = true;
            
            // Disable all movie buttons
            for (let i = 1; i <= 4; i++) {
                document.getElementById(`movie-${i}-btn`).disabled = true;
            }
        }

        // Enable ad buttons
        function enableAdButtons() {
            document.getElementById('watch-ad-btn').disabled = false;
            document.getElementById('watch-ad-btn-earn').disabled = false;
            document.getElementById('auto-ad-btn').disabled = false;
            document.getElementById('auto-ad-btn-earn').disabled = false;
            document.getElementById('stop-auto-btn').disabled = true;
            document.getElementById('stop-auto-btn-earn').disabled = true;
            
            // Enable movie buttons based on cooldown
            for (let i = 1; i <= 4; i++) {
                const index = i - 1;
                const isCooldown = movieCooldowns[index] && new Date().getTime() < movieCooldowns[index];
                updateMovieButton(i, false, isCooldown);
            }
        }

        // Check if user has joined Telegram channel
        function checkTelegramJoin() {
            const hasJoined = localStorage.getItem('telegramJoined');
            
            if (!hasJoined) {
                // Show popup modal after 2 seconds
                setTimeout(() => {
                    document.getElementById('telegramModal').style.display = 'flex';
                }, 2000);
            }
        }

        // Verify Telegram join
        function verifyTelegramJoin() {
            localStorage.setItem('telegramJoined', 'true');
            document.getElementById('telegramModal').style.display = 'none';
            showNotification('ধন্যবাদ! এখন আপনি ইনকাম শুরু করতে পারেন।', 'success');
        }

        // পেজ দেখানোর ফাংশন
        function showPage(pageId, element) {
            document.querySelectorAll('.page-section').forEach(page => {
                page.classList.remove('active');
            });
            
            document.getElementById(pageId).classList.add('active');
            
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            element.classList.add('active');
            
            if (pageId === 'withdraw-page') {
                document.getElementById('total-earned-withdraw').textContent = (earnedPoints + referralEarnings).toFixed(2);
            }
            
            if (pageId === 'earn-page') {
                document.getElementById('referral-count-earn').textContent = referralCount;
                document.getElementById('referral-earnings-earn').textContent = referralEarnings.toFixed(2);
                document.getElementById('referral-link-earn').value = document.getElementById('referral-link').value;
            }
            
            if (pageId === 'movies-page') {
                startMovieCooldownTimers();
            }
        }

        // Generate a random user ID if not exists
        function generateUserId() {
            if (localStorage.getItem('userId')) {
                return localStorage.getItem('userId');
            }
            
            const newId = Math.floor(100000 + Math.random() * 900000);
            localStorage.setItem('userId', newId.toString());
            return newId.toString();
        }

        // Check if there's a referral in URL
        function checkReferral() {
            const urlParams = new URLSearchParams(window.location.search);
            const referrerId = urlParams.get('ref');
            
            if (referrerId && referrerId !== userId) {
                if (!localStorage.getItem('referredBy')) {
                    localStorage.setItem('referredBy', referrerId);
                    showNotification('আপনি একটি রেফারেল লিঙ্ক ব্যবহার করে যোগদান করেছেন! রেফারার ১০ টাকা বোনাস পাবেন।', 'success');
                    
                    setTimeout(() => {
                        console.log(`User ${referrerId} should get referral bonus`);
                    }, 1000);
                }
            }
        }

        // Generate referral link
        function generateReferralLink() {
            const referralLink = "https://t.me/worekupjob94_bot";
            document.getElementById('referral-link').value = referralLink;
        }

        // Copy referral link to clipboard
        function copyReferralLink() {
            const referralLink = document.getElementById('referral-link');
            referralLink.select();
            document.execCommand('copy');
            
            const copyBtn = document.getElementById('copy-referral');
            const originalText = copyBtn.textContent;
            copyBtn.textContent = 'কপি হয়েছে!';
            copyBtn.style.background = 'linear-gradient(135deg, var(--success-color), #27ae60)';
            
            showNotification('রেফারেল লিঙ্ক কপি করা হয়েছে!', 'success');
            
            setTimeout(() => {
                copyBtn.textContent = originalText;
                copyBtn.style.background = 'linear-gradient(135deg, var(--primary-color), var(--secondary-color))';
            }, 2000);
        }

        // Check if Monetag ad is ready
        function checkAdReady() {
            if (typeof window.show_10271832 !== 'function') {
                document.getElementById('ad-status').innerHTML = '<i class="fas fa-spinner fa-spin"></i> বিজ্ঞাপন সিস্টেম লোড হচ্ছে...';
                setTimeout(checkAdReady, 1000);
            } else {
                document.getElementById('ad-status').innerHTML = '<i class="fas fa-check-circle"></i> বিজ্ঞাপন দেখতে প্রস্তুত';
            }
        }

        // Load user data from localStorage
        function loadUserData() {
            if (localStorage.getItem('watchedAdsCount')) {
                watchedAdsCount = parseInt(localStorage.getItem('watchedAdsCount'));
            }
            
            if (localStorage.getItem('earnedPoints')) {
                earnedPoints = parseFloat(localStorage.getItem('earnedPoints'));
            }
            
            if (localStorage.getItem('referralCount')) {
                referralCount = parseInt(localStorage.getItem('referralCount'));
            }
            
            if (localStorage.getItem('referralEarnings')) {
                referralEarnings = parseFloat(localStorage.getItem('referralEarnings'));
            }
            
            // Load daily ad data
            const today = new Date().toDateString();
            const storedDate = localStorage.getItem('lastAdDate');
            if (storedDate === today) {
                dailyAdsWatched = parseInt(localStorage.getItem('dailyAdsWatched')) || 0;
            }
            
            const storedLimitResetTime = localStorage.getItem('limitResetTime');
            if (storedLimitResetTime) {
                limitResetTime = new Date(parseInt(storedLimitResetTime));
            }
            
            // Load movie data
            const savedMovieData = localStorage.getItem('movieAdsWatched');
            if (savedMovieData) {
                movieAdsWatched = JSON.parse(savedMovieData);
            }
            
            // Load movie cooldowns
            for (let i = 1; i <= 4; i++) {
                const cooldown = localStorage.getItem(`movie${i}_cooldown`);
                if (cooldown && cooldown !== 'null') {
                    movieCooldowns[i-1] = parseInt(cooldown);
                }
            }
        }

        // Save user data to localStorage
        function saveUserData() {
            localStorage.setItem('watchedAdsCount', watchedAdsCount);
            localStorage.setItem('earnedPoints', earnedPoints.toFixed(2));
            localStorage.setItem('referralCount', referralCount);
            localStorage.setItem('referralEarnings', referralEarnings.toFixed(2));
            
            // Save daily ad data
            const today = new Date().toDateString();
            localStorage.setItem('dailyAdsWatched', dailyAdsWatched);
            localStorage.setItem('lastAdDate', today);
            
            // Save movie data
            localStorage.setItem('movieAdsWatched', JSON.stringify(movieAdsWatched));
            
            // Save movie cooldowns
            for (let i = 1; i <= 4; i++) {
                localStorage.setItem(`movie${i}_cooldown`, movieCooldowns[i-1]);
            }
        }

        // Update all UI elements
        function updateUI() {
            document.getElementById('watched-ads').textContent = watchedAdsCount;
            document.getElementById('earned-money').textContent = (earnedPoints + referralEarnings).toFixed(2);
            document.getElementById('referral-count').textContent = referralCount;
            document.getElementById('referral-earnings').textContent = referralEarnings.toFixed(2);
            updateProgress();
        }

        // Update progress bar and text
        function updateProgress() {
            const progressPercent = (earnedPoints / MIN_WITHDRAW_TAKA) * 100;
            
            document.getElementById('progress-fill').style.width = `${Math.min(progressPercent, 100)}%`;
            document.getElementById('ads-progress').textContent = `${earnedPoints.toFixed(2)}/${MIN_WITHDRAW_TAKA} টাকা`;
        }

        // Update movie progress
        function updateMovieProgress() {
            for (let i = 0; i < 4; i++) {
                const progress = movieAdsWatched[i];
                const progressPercent = (progress / MOVIE_ADS_REQUIRED) * 100;
                
                document.getElementById(`movie-${i+1}-progress`).textContent = `${progress}/${MOVIE_ADS_REQUIRED} বিজ্ঞাপন`;
                document.getElementById(`movie-${i+1}-bar`).style.width = `${Math.min(progressPercent, 100)}%`;
                document.getElementById(`movie-${i+1}-ads`).textContent = progress;
                
                updateMovieButton(i+1, false, false);
            }
        }

        // Update movie button
        function updateMovieButton(movieIndex, isLoading, isCooldown) {
            const index = movieIndex - 1;
            const button = document.getElementById(`movie-${movieIndex}-btn`);
            const adsWatched = movieAdsWatched[index];
            const cooldownActive = movieCooldowns[index] && new Date().getTime() < movieCooldowns[index];
            
            if (isLoading) {
                button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> লোড হচ্ছে...';
                button.disabled = true;
                return;
            }
            
            if (cooldownActive || isCooldown) {
                button.innerHTML = '<i class="fas fa-clock"></i> অপেক্ষা করুন';
                button.disabled = true;
                document.getElementById(`movie-${movieIndex}-status`).textContent = 'কুলডাউন';
                return;
            }
            
            if (adsWatched >= MOVIE_ADS_REQUIRED) {
                button.innerHTML = '<i class="fas fa-play"></i> মুভি দেখুন';
                button.style.background = 'linear-gradient(135deg, var(--success-color), #27ae60)';
                button.disabled = false;
                document.getElementById(`movie-${movieIndex}-status`).textContent = 'প্রস্তুত';
            } else {
                button.innerHTML = '<i class="fas fa-play"></i> Play NOW';
                button.style.background = 'linear-gradient(135deg, var(--primary-color), var(--secondary-color))';
                button.disabled = false;
                document.getElementById(`movie-${movieIndex}-status`).textContent = 'প্রস্তুত';
            }
            
            // Disable if daily limit reached
            if (dailyAdsWatched >= DAILY_AD_LIMIT) {
                button.disabled = true;
            }
        }

        // Function to watch an ad and earn points
        function watchAd() {
            if (dailyAdsWatched >= DAILY_AD_LIMIT) {
                showNotification('আপনি আজকের দৈনিক সীমা পূর্ণ করেছেন! ২৪ ঘন্টা পরে আবার চেষ্টা করুন।', 'error');
                return;
            }
            
            const hasJoined = localStorage.getItem('telegramJoined');
            if (!hasJoined) {
                showNotification('দয়া করে প্রথমে টেলিগ্রাম চ্যানেলে জয়েন করুন।', 'error');
                document.getElementById('telegramModal').style.display = 'flex';
                return;
            }
            
            if (isAdLoading) return;
            
            if (typeof window.show_10271832 !== 'function') {
                document.getElementById('ad-status').innerHTML = '<i class="fas fa-exclamation-circle"></i> বিজ্ঞাপন সিস্টেম প্রস্তুত নয়। দয়া করে অপেক্ষা করুন...';
                return;
            }

            isAdLoading = true;
            document.getElementById('watch-ad-btn').disabled = true;
            document.getElementById('watch-ad-btn-earn').disabled = true;
            document.getElementById('ad-status').innerHTML = '<i class="fas fa-spinner fa-spin"></i> বিজ্ঞাপন লোড হচ্ছে...';
            
            try {
                window.show_10271832().then(() => {
                    watchedAdsCount++;
                    earnedPoints += POINTS_PER_AD;
                    dailyAdsWatched++;
                    
                    saveUserData();
                    updateUI();
                    document.getElementById('ad-status').innerHTML = '<i class="fas fa-check-circle"></i> বিজ্ঞাপন সফলভাবে দেখা হয়েছে!';
                    
                    createCoinAnimation();
                    
                    showNotification(`২ টাকা যোগ হয়েছে! আপনার ব্যালেন্স: ${(earnedPoints + referralEarnings).toFixed(2)} টাকা`, 'success');
                    
                    if (dailyAdsWatched >= DAILY_AD_LIMIT) {
                        disableAdButtons();
                        document.getElementById('daily-limit').style.display = 'block';
                        limitResetTime = new Date();
                        limitResetTime.setHours(limitResetTime.getHours() + 24);
                        localStorage.setItem('limitResetTime', limitResetTime.getTime());
                        startTimer();
                        showNotification('আপনি আজকের দৈনিক সীমা পূর্ণ করেছেন! ২৪ ঘন্টা পরে আবার চেষ্টা করুন।', 'warning');
                    }
                    
                    if (earnedPoints + referralEarnings >= MIN_WITHDRAW_TAKA) {
                        showNotification(`অভিনন্দন! আপনি উত্তোলনের জন্য ${MIN_WITHDRAW_TAKA} টাকা সংগ্রহ করেছেন।`, 'info');
                    }
                    
                    if (isAutoMode) {
                        setTimeout(() => {
                            isAdLoading = false;
                            document.getElementById('watch-ad-btn').disabled = false;
                            document.getElementById('watch-ad-btn-earn').disabled = false;
                            watchAd();
                        }, 10000);
                    } else {
                        isAdLoading = false;
                        document.getElementById('watch-ad-btn').disabled = false;
                        document.getElementById('watch-ad-btn-earn').disabled = false;
                    }
                }).catch(error => {
                    console.error('Error showing ad:', error);
                    document.getElementById('ad-status').innerHTML = '<i class="fas fa-times-circle"></i> বিজ্ঞাপন দেখানো যায়নি। আবার চেষ্টা করুন।';
                    isAdLoading = false;
                    document.getElementById('watch-ad-btn').disabled = false;
                    document.getElementById('watch-ad-btn-earn').disabled = false;
                    
                    if (isAutoMode) {
                        setTimeout(watchAd, 10000);
                    }
                });
            } catch (error) {
                console.error('Error in ad system:', error);
                document.getElementById('ad-status').innerHTML = '<i class="fas fa-exclamation-triangle"></i> বিজ্ঞাপন সিস্টেমে ত্রুটি। পৃষ্ঠাটি রিফ্রেশ করুন।';
                isAdLoading = false;
                document.getElementById('watch-ad-btn').disabled = false;
                document.getElementById('watch-ad-btn-earn').disabled = false;
            }
        }

        // Watch movie ad
        function watchMovieAd(movieIndex) {
            if (dailyAdsWatched >= DAILY_AD_LIMIT) {
                showNotification('আপনি আজকের দৈনিক সীমা পূর্ণ করেছেন! ২৪ ঘন্টা পরে আবার চেষ্টা করুন।', 'error');
                return;
            }
            
            const hasJoined = localStorage.getItem('telegramJoined');
            if (!hasJoined) {
                showNotification('দয়া করে প্রথমে টেলিগ্রাম চ্যানেলে জয়েন করুন।', 'error');
                document.getElementById('telegramModal').style.display = 'flex';
                return;
            }
            
            const index = movieIndex - 1;
            const adsWatched = movieAdsWatched[index];
            const cooldownActive = movieCooldowns[index] && new Date().getTime() < movieCooldowns[index];
            
            // Check if cooldown is active
            if (cooldownActive) {
                showNotification('এই মুভি দেখার জন্য আপনাকে ৫ মিনিট অপেক্ষা করতে হবে।', 'error');
                return;
            }
            
            // Check if already watched all ads for this movie
            if (adsWatched >= MOVIE_ADS_REQUIRED) {
                // Redirect to movie and start cooldown
                window.open(MOVIE_LINKS[index], '_blank');
                showNotification('মুভি দেখা শুরু হচ্ছে! আবার দেখতে ৫ মিনিট অপেক্ষা করুন।', 'success');
                
                // Reset ads watched for this movie
                movieAdsWatched[index] = 0;
                
                // Start 5-minute cooldown
                const cooldownEnd = new Date();
                cooldownEnd.setMinutes(cooldownEnd.getMinutes() + MOVIE_COOLDOWN_MINUTES);
                movieCooldowns[index] = cooldownEnd.getTime();
                
                saveUserData();
                updateMovieProgress();
                startMovieTimer(movieIndex, cooldownEnd.getTime());
                
                return;
            }
            
            if (isAdLoading) return;
            
            if (typeof window.show_10271832 !== 'function') {
                showNotification('বিজ্ঞাপন সিস্টেম প্রস্তুত নয়। দয়া করে অপেক্ষা করুন...', 'error');
                return;
            }

            isAdLoading = true;
            currentMovieAd = movieIndex;
            
            // Disable all movie buttons while ad is loading
            for (let i = 1; i <= 4; i++) {
                updateMovieButton(i, true, false);
            }
            
            showNotification(`মুভি ${movieIndex} এর বিজ্ঞাপন লোড হচ্ছে...`, 'info');
            
            try {
                window.show_10271832().then(() => {
                    watchedAdsCount++;
                    earnedPoints += POINTS_PER_AD;
                    dailyAdsWatched++;
                    movieAdsWatched[index]++;
                    
                    saveUserData();
                    updateUI();
                    updateMovieProgress();
                    
                    showNotification(`বিজ্ঞাপন দেখা হয়েছে! মুভি ${movieIndex}: ${movieAdsWatched[index]}/${MOVIE_ADS_REQUIRED} বিজ্ঞাপন`, 'success');
                    
                    if (dailyAdsWatched >= DAILY_AD_LIMIT) {
                        disableAdButtons();
                        document.getElementById('daily-limit').style.display = 'block';
                        limitResetTime = new Date();
                        limitResetTime.setHours(limitResetTime.getHours() + 24);
                        localStorage.setItem('limitResetTime', limitResetTime.getTime());
                        startTimer();
                        showNotification('আপনি আজকের দৈনিক সীমা পূর্ণ করেছেন! ২৪ ঘন্টা পরে আবার চেষ্টা করুন।', 'warning');
                    }
                    
                    // Check if all ads watched for this movie
                    if (movieAdsWatched[index] >= MOVIE_ADS_REQUIRED) {
                        setTimeout(() => {
                            showNotification(`অভিনন্দন! আপনি ${MOVIE_ADS_REQUIRED}টি বিজ্ঞাপন দেখেছেন। এখন মুভি দেখতে পারবেন।`, 'success');
                        }, 1000);
                    }
                    
                    isAdLoading = false;
                    currentMovieAd = null;
                    
                    // Re-enable movie buttons
                    for (let i = 1; i <= 4; i++) {
                        const idx = i - 1;
                        const isCooldown = movieCooldowns[idx] && new Date().getTime() < movieCooldowns[idx];
                        updateMovieButton(i, false, isCooldown);
                    }
                }).catch(error => {
                    console.error('Error showing ad:', error);
                    showNotification('বিজ্ঞাপন দেখানো যায়নি। আবার চেষ্টা করুন।', 'error');
                    isAdLoading = false;
                    currentMovieAd = null;
                    
                    for (let i = 1; i <= 4; i++) {
                        const idx = i - 1;
                        const isCooldown = movieCooldowns[idx] && new Date().getTime() < movieCooldowns[idx];
                        updateMovieButton(i, false, isCooldown);
                    }
                });
            } catch (error) {
                console.error('Error in ad system:', error);
                showNotification('বিজ্ঞাপন সিস্টেমে ত্রুটি। পৃষ্ঠাটি রিফ্রেশ করুন।', 'error');
                isAdLoading = false;
                currentMovieAd = null;
                
                for (let i = 1; i <= 4; i++) {
                    const idx = i - 1;
                    const isCooldown = movieCooldowns[idx] && new Date().getTime() < movieCooldowns[idx];
                    updateMovieButton(i, false, isCooldown);
                }
            }
        }

        // Create coin animation
        function createCoinAnimation() {
            const button = document.getElementById('watch-ad-btn');
            const rect = button.getBoundingClientRect();
            const x = rect.left + rect.width / 2;
            const y = rect.top + rect.height / 2;
            
            const coin = document.createElement('div');
            coin.className = 'coin-animation';
            coin.innerHTML = '<i class="fas fa-coins"></i>';
            coin.style.left = `${x}px`;
            coin.style.top = `${y}px`;
            document.body.appendChild(coin);
            
            setTimeout(() => {
                document.body.removeChild(coin);
            }, 1000);
        }

        // Start auto ads mode
        function startAutoAds() {
            if (dailyAdsWatched >= DAILY_AD_LIMIT) {
                showNotification('আপনি আজকের দৈনিক সীমা পূর্ণ করেছেন! ২৪ ঘন্টা পরে আবার চেষ্টা করুন।', 'error');
                return;
            }
            
            const hasJoined = localStorage.getItem('telegramJoined');
            if (!hasJoined) {
                showNotification('দয়া করে প্রথমে টেলিগ্রাম চ্যানেলে জয়েন করুন।', 'error');
                document.getElementById('telegramModal').style.display = 'flex';
                return;
            }
            
            isAutoMode = true;
            document.getElementById('auto-ad-btn').disabled = true;
            document.getElementById('auto-ad-btn-earn').disabled = true;
            document.getElementById('stop-auto-btn').disabled = false;
            document.getElementById('stop-auto-btn-earn').disabled = false;
            document.getElementById('watch-ad-btn').disabled = true;
            document.getElementById('watch-ad-btn-earn').disabled = true;
            document.getElementById('ad-status').innerHTML = '<i class="fas fa-robot"></i> স্বয়ংক্রিয় বিজ্ঞাপন মোড চালু';
            
            watchAd();
        }

        // Stop auto ads mode
        function stopAutoAds() {
            isAutoMode = false;
            document.getElementById('auto-ad-btn').disabled = false;
            document.getElementById('auto-ad-btn-earn').disabled = false;
            document.getElementById('stop-auto-btn').disabled = true;
            document.getElementById('stop-auto-btn-earn').disabled = true;
            document.getElementById('watch-ad-btn').disabled = false;
            document.getElementById('watch-ad-btn-earn').disabled = false;
            document.getElementById('ad-status').innerHTML = '<i class="fas fa-check-circle"></i> স্বয়ংক্রিয় বিজ্ঞাপন মোড বন্ধ';
        }

        // Show withdraw form
        function showWithdrawForm() {
            showPage('withdraw-page', document.querySelector('.nav-item:nth-child(4)'));
            
            const totalEarnings = earnedPoints + referralEarnings;
            
            if (referralCount < MIN_REFERRAL_COUNT) {
                document.getElementById('withdraw-status').textContent = 
                    `কমপক্ষে ${MIN_REFERRAL_COUNT} টি রেফার না থাকলে পেমেন্ট পাবেন না। আপনার আছে ${referralCount} টি রেফার।`;
                document.getElementById('withdraw-status').className = 'error-message';
                document.getElementById('withdraw-section').style.display = 'block';
                return;
            }
            
            if (totalEarnings < MIN_WITHDRAW_TAKA) {
                document.getElementById('withdraw-status').textContent = 
                    `ন্যূনতম উত্তোলন পরিমাণ ${MIN_WITHDRAW_TAKA} টাকা। আপনার আছে ${totalEarnings.toFixed(2)} টাকা।`;
                document.getElementById('withdraw-status').className = 'error-message';
                document.getElementById('withdraw-section').style.display = 'block';
                return;
            }
            
            document.getElementById('withdraw-amount').value = '';
            document.getElementById('withdraw-amount').placeholder = `সর্বোচ্চ: ${totalEarnings.toFixed(2)} টাকা`;
            document.getElementById('withdraw-amount').max = totalEarnings.toFixed(2);
            document.getElementById('withdraw-phone').value = '';
            document.getElementById('payment-method').selectedIndex = 0;
            document.getElementById('withdraw-status').textContent = '';
            document.getElementById('withdraw-section').style.display = 'block';
        }

        // Handle withdrawal request
        function withdrawPoints() {
            const amount = parseFloat(document.getElementById('withdraw-amount').value);
            const paymentMethod = document.getElementById('payment-method').value;
            const phoneNumber = document.getElementById('withdraw-phone').value;
            const totalEarnings = earnedPoints + referralEarnings;
            const withdrawStatus = document.getElementById('withdraw-status');
            
            if (referralCount < MIN_REFERRAL_COUNT) {
                withdrawStatus.textContent = `কমপক্ষে ${MIN_REFERRAL_COUNT} টি রেফার না থাকলে পেমেন্ট পাবেন না। আপনার আছে ${referralCount} টি রেফার।`;
                withdrawStatus.className = 'error-message';
                return;
            }
            
            if (!amount || isNaN(amount)) {
                withdrawStatus.textContent = 'দয়া করে একটি বৈধ পরিমাণ লিখুন।';
                withdrawStatus.className = 'error-message';
                return;
            }
            
            if (amount < MIN_WITHDRAW_TAKA) {
                withdrawStatus.textContent = `ন্যূনতম উত্তোলন পরিমাণ ${MIN_WITHDRAW_TAKA} টাকা।`;
                withdrawStatus.className = 'error-message';
                return;
            }
            
            if (amount > totalEarnings) {
                withdrawStatus.textContent = `পর্যাপ্ত ব্যালেন্স নেই। আপনার আছে ${totalEarnings.toFixed(2)} টাকা।`;
                withdrawStatus.className = 'error-message';
                return;
            }
            
            if (!paymentMethod) {
                withdrawStatus.textContent = 'দয়া করে একটি পেমেন্ট মাধ্যম নির্বাচন করুন।';
                withdrawStatus.className = 'error-message';
                return;
            }
            
            if (!phoneNumber || !/^01[3-9][0-9]{8}$/.test(phoneNumber)) {
                withdrawStatus.textContent = 'দয়া করে একটি বৈধ বাংলাদেশী মোবাইল নম্বর লিখুন।';
                withdrawStatus.className = 'error-message';
                return;
            }
            
            let remainingAmount = amount;
            
            if (referralEarnings > 0) {
                const referralDeduction = Math.min(referralEarnings, remainingAmount);
                referralEarnings -= referralDeduction;
                remainingAmount -= referralDeduction;
            }
            
            if (remainingAmount > 0) {
                earnedPoints -= remainingAmount;
                if (earnedPoints < 0) earnedPoints = 0;
            }
            
            saveUserData();
            updateUI();
            
            const message = `📌 নতুন উত্তোলন অনুরোধ 📌\n\n` +
                             `👤 ব্যবহারকারী আইডি: ${userId}\n` +
                             `💰 পরিমাণ: ${amount} টাকা\n` +
                             `📱 মাধ্যম: ${paymentMethod.toUpperCase()}\n` +
                             `📞 ফোন: ${phoneNumber}\n\n` +
                             `📊 দেখা বিজ্ঞাপন: ${watchedAdsCount}\n` +
                             `👥 আমন্ত্রিত: ${referralCount}\n` +
                             `💵 মোট আয়: ${totalEarnings.toFixed(2)} টাকা`;
            
            sendWithdrawRequestToAdmin(message);
            
            withdrawStatus.textContent = 'উত্তোলন অনুরোধ সফলভাবে জমা দেওয়া হয়েছে! প্রসেসিং করতে ২৪-৪৮ ঘন্টা সময় লাগতে পারে।';
            withdrawStatus.className = 'success-message';
            
            showNotification('আপনার উত্তোলন অনুরোধ পাঠানো হয়েছে!', 'success');
            
            setTimeout(() => {
                document.getElementById('withdraw-section').style.display = 'none';
            }, 3000);
        }

        // Send withdrawal request to admin via Telegram bot
        function sendWithdrawRequestToAdmin(message) {
            const apiUrl = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${ADMIN_CHAT_ID}&text=${encodeURIComponent(message)}`;
            
            fetch(apiUrl)
                .then(response => response.json())
                .then(data => {
                    if (data.ok) {
                        console.log('উত্তোলন অনুরোধ অ্যাডমিন에게 পাঠানো হয়েছে');
                    } else {
                        console.error('উত্তোলন অনুরোধ পাঠানো যায়নি:', data);
                    }
                })
                .catch(error => console.error('মেসেজ পাঠাতে ত্রুটি:', error));
        }

        // Show notification
        function showNotification(message, type) {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notification-text');
            
            notificationText.textContent = message;
            notification.className = `notification ${type}`;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Initialize the app when page loads
        window.onload = initApp;
    </script>
</body>
</html>


